// src/prompt-optimization/formatter.ts
function formatBox(title, content) {
  const separator = "━".repeat(80);
  return `
${separator}
\uD83D\uDD27 ${title}
${separator}
${content}
${separator}`;
}
function formatQuiet(session) {
  const hasChanges = session.steps.some((s) => s.status === "approved" || s.status === "modified");
  if (!hasChanges) {
    return {
      display: "",
      actions: []
    };
  }
  const display = `\uD83D\uDD27 Optimized ${session.steps.filter((s) => s.status === "approved" || s.status === "modified").length} techniques`;
  return {
    display,
    actions: [
      { type: "execute" },
      { type: "edit_final" },
      { type: "cancel" }
    ]
  };
}
function formatNormal(session) {
  const approvedSteps = session.steps.filter((s) => s.status === "approved" || s.status === "modified");
  if (approvedSteps.length === 0) {
    return {
      display: "",
      actions: []
    };
  }
  let content = `\uD83D\uDCDD "${session.originalPrompt}"
`;
  content += `\uD83C\uDFAF Complexity: ${session.complexity} | Domain: ${session.domain}

`;
  content += `Applying:
`;
  for (const step of approvedSteps) {
    const icon = step.status === "modified" ? "\uD83D\uDCDD" : "✅";
    content += `${icon} ${step.name}
`;
  }
  content += `
Expected improvement: ~60-80% quality boost`;
  const display = formatBox("Prompt Optimization", content);
  return {
    display,
    actions: [{ type: "approve_all" }, { type: "skip_optimization" }]
  };
}
function formatVerbose(session, currentStep = 0) {
  if (currentStep >= session.steps.length) {
    return formatFinalReview(session, "verbose");
  }
  const step = session.steps[currentStep];
  let content = `\uD83D\uDCDD Original: "${session.originalPrompt}"

`;
  content += `\uD83C\uDFAF Complexity: ${session.complexity} (`;
  const complexityLabels = {
    simple: "Simple - greeting or basic request",
    medium: "Medium - requires some analysis",
    complex: "Complex - requires deep analysis"
  };
  content += complexityLabels[session.complexity] || session.complexity;
  content += `)
`;
  content += `\uD83C\uDFF7️  Domain: ${session.domain}
`;
  if (session.domain !== "general") {
    const domainLabels = {
      security: "Security & Authentication",
      frontend: "Frontend Development",
      backend: "Backend Development",
      database: "Database & Data",
      devops: "DevOps & Infrastructure",
      architecture: "System Architecture",
      testing: "Testing & QA",
      general: "General Software Engineering"
    };
    content += `  ${domainLabels[session.domain] || session.domain}
`;
  }
  if (step.technique === "analysis") {
    const missing = session.originalPrompt.length < 10 ? ["more details needed"] : [];
    if (missing.length > 0) {
      content += `⚠️  Missing: ${missing.join(", ")}
`;
    }
  }
  const display = formatBox(`Prompt Optimization (Step ${currentStep + 1}/${session.steps.length})`, content);
  const actions = [];
  if (step.skippable) {
    actions.push({ type: "reject", stepId: step.id });
  }
  actions.push({ type: "approve", stepId: step.id });
  actions.push({ type: "modify", stepId: step.id });
  return {
    display,
    actions
  };
}
function formatFinalReview(session, verbosity) {
  const approvedSteps = session.steps.filter((s) => s.status === "approved" || s.status === "modified");
  let content = "";
  if (verbosity !== "quiet") {
    content += "Techniques applied: ";
    const techniqueNames = approvedSteps.map((s) => {
      const name = s.name;
      return `[${name.split(" ")[0]}]`;
    });
    content += `${techniqueNames.join(" ")}

`;
  }
  content += "```\n";
  content += session.finalPrompt;
  content += "\n```";
  if (verbosity !== "quiet") {
    const stepCount = approvedSteps.length;
    const totalSteps = session.steps.length;
    if (stepCount > 0) {
      content += `

`;
      content += `Expected improvement: ~${stepCount * 15 + 30}-${stepCount * 20 + 50}% quality boost`;
      content += `
Techniques applied: ${stepCount}/${totalSteps}`;
    }
  }
  const display = formatBox("✨ Optimized Prompt Ready", content);
  return {
    display,
    actions: [
      { type: "execute" },
      { type: "edit_final" },
      { type: "cancel" }
    ]
  };
}
function formatOutput(session, verbosity, currentStep = 0) {
  switch (verbosity) {
    case "quiet":
      return formatQuiet(session);
    case "normal":
      return formatNormal(session);
    case "verbose":
      return formatVerbose(session, currentStep);
    default:
      return formatNormal(session);
  }
}
export {
  formatVerbose,
  formatQuiet,
  formatOutput,
  formatNormal,
  formatFinalReview
};

//# debugId=2A24DC3893B83A6F64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3Byb21wdC1vcHRpbWl6YXRpb24vZm9ybWF0dGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIi8qKlxuICogT3V0cHV0IEZvcm1hdHRlclxuICpcbiAqIEZvcm1hdHMgb3B0aW1pemF0aW9uIG91dHB1dCBmb3IgZGlmZmVyZW50IHZlcmJvc2l0eSBsZXZlbHNcbiAqIChxdWlldCwgbm9ybWFsLCB2ZXJib3NlKSB3aXRoIGF2YWlsYWJsZSBhY3Rpb25zLlxuICovXG5cbmltcG9ydCB0eXBlIHtcbiAgICBBY3Rpb24sXG4gICAgRm9ybWF0dGVkT3V0cHV0LFxuICAgIE9wdGltaXphdGlvblNlc3Npb24sXG4gICAgT3B0aW1pemF0aW9uU3RlcCxcbiAgICBWZXJib3NpdHksXG59IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8qKlxuICogRm9ybWF0dGluZyBoZWxwZXJzXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdEJveCh0aXRsZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IFwi4pSBXCIucmVwZWF0KDgwKTtcbiAgICByZXR1cm4gYFxcbiR7c2VwYXJhdG9yfVxcbvCflKcgJHt0aXRsZX1cXG4ke3NlcGFyYXRvcn1cXG4ke2NvbnRlbnR9XFxuJHtzZXBhcmF0b3J9YDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0U3RlcChzdGVwOiBPcHRpbWl6YXRpb25TdGVwLCBzaG93UmVzZWFyY2hCYXNpcyA9IHRydWUpOiBzdHJpbmcge1xuICAgIGxldCBjb250ZW50ID0gYCR7c3RlcC5uYW1lfWA7XG5cbiAgICBpZiAoc2hvd1Jlc2VhcmNoQmFzaXMpIHtcbiAgICAgICAgY29udGVudCArPSBgICgke3N0ZXAucmVzZWFyY2hCYXNpc30pYDtcbiAgICB9XG5cbiAgICBjb250ZW50ICs9IGBcXG4ke3N0ZXAuZGVzY3JpcHRpb259YDtcblxuICAgIGlmIChzdGVwLmNvbnRlbnQpIHtcbiAgICAgICAgY29udGVudCArPSBgXFxuXFxuQWRkaW5nOiAke3N0ZXAuY29udGVudH1gO1xuICAgIH1cblxuICAgIGlmIChzdGVwLm1vZGlmaWVkQ29udGVudCkge1xuICAgICAgICBjb250ZW50ICs9IGBcXG5cXG5Nb2RpZmllZDogJHtzdGVwLm1vZGlmaWVkQ29udGVudH1gO1xuICAgIH1cblxuICAgIC8vIFN0YXR1cyBpbmRpY2F0b3JcbiAgICBjb25zdCBzdGF0dXNJY29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgcGVuZGluZzogXCLij7NcIixcbiAgICAgICAgYXBwcm92ZWQ6IFwi4pyFXCIsXG4gICAgICAgIHJlamVjdGVkOiBcIuKdjFwiLFxuICAgICAgICBtb2RpZmllZDogXCLwn5OdXCIsXG4gICAgfTtcbiAgICBjb250ZW50ICs9IGBcXG5cXG4ke3N0YXR1c0ljb25zW3N0ZXAuc3RhdHVzXX1gO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFjdGlvbnMoYWN0aW9uczogQWN0aW9uW10pOiBzdHJpbmcge1xuICAgIGlmIChhY3Rpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG5cbiAgICBjb25zdCBhY3Rpb25MYWJlbHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgIGFwcHJvdmU6IFwiW+KckyBBcHByb3ZlXVwiLFxuICAgICAgICByZWplY3Q6IFwiW+KclyBSZWplY3RdXCIsXG4gICAgICAgIG1vZGlmeTogXCJb4pyOIE1vZGlmeV1cIixcbiAgICAgICAgYXBwcm92ZV9hbGw6IFwiW+KckyBBcHByb3ZlIEFsbF1cIixcbiAgICAgICAgc2tpcF9vcHRpbWl6YXRpb246IFwiW+KclyBTa2lwIE9wdGltaXphdGlvbl1cIixcbiAgICAgICAgZWRpdF9maW5hbDogXCJb4pyOIEVkaXQgRmluYWxdXCIsXG4gICAgICAgIGV4ZWN1dGU6IFwiW+KckyBFeGVjdXRlXVwiLFxuICAgICAgICBjYW5jZWw6IFwiW+KclyBDYW5jZWxdXCIsXG4gICAgfTtcblxuICAgIGNvbnN0IGFjdGlvblRleHRzID0gYWN0aW9ucy5tYXAoKGFjdGlvbikgPT4ge1xuICAgICAgICBjb25zdCB0eXBlID0gYWN0aW9uLnR5cGU7XG4gICAgICAgIHJldHVybiBhY3Rpb25MYWJlbHNbdHlwZV0gfHwgYFske3R5cGV9XWA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYFxcblxcbiR7YWN0aW9uVGV4dHMuam9pbihcIiBcIil9YDtcbn1cblxuLyoqXG4gKiBGb3JtYXQgcXVpZXQgbW9kZSAobWluaW1hbCBvdXRwdXQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRRdWlldChzZXNzaW9uOiBPcHRpbWl6YXRpb25TZXNzaW9uKTogRm9ybWF0dGVkT3V0cHV0IHtcbiAgICBjb25zdCBoYXNDaGFuZ2VzID0gc2Vzc2lvbi5zdGVwcy5zb21lKFxuICAgICAgICAocykgPT4gcy5zdGF0dXMgPT09IFwiYXBwcm92ZWRcIiB8fCBzLnN0YXR1cyA9PT0gXCJtb2RpZmllZFwiLFxuICAgICk7XG5cbiAgICBpZiAoIWhhc0NoYW5nZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IFwiXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBkaXNwbGF5ID0gYPCflKcgT3B0aW1pemVkICR7c2Vzc2lvbi5zdGVwcy5maWx0ZXIoKHMpID0+IHMuc3RhdHVzID09PSBcImFwcHJvdmVkXCIgfHwgcy5zdGF0dXMgPT09IFwibW9kaWZpZWRcIikubGVuZ3RofSB0ZWNobmlxdWVzYDtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRpc3BsYXksXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdHlwZTogXCJleGVjdXRlXCIgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJlZGl0X2ZpbmFsXCIgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJjYW5jZWxcIiB9LFxuICAgICAgICBdLFxuICAgIH07XG59XG5cbi8qKlxuICogRm9ybWF0IG5vcm1hbCBtb2RlIChjb25kZW5zZWQgdmlldylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE5vcm1hbChzZXNzaW9uOiBPcHRpbWl6YXRpb25TZXNzaW9uKTogRm9ybWF0dGVkT3V0cHV0IHtcbiAgICBjb25zdCBhcHByb3ZlZFN0ZXBzID0gc2Vzc2lvbi5zdGVwcy5maWx0ZXIoXG4gICAgICAgIChzKSA9PiBzLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiIHx8IHMuc3RhdHVzID09PSBcIm1vZGlmaWVkXCIsXG4gICAgKTtcblxuICAgIGlmIChhcHByb3ZlZFN0ZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGlzcGxheTogXCJcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGxldCBjb250ZW50ID0gYPCfk50gXCIke3Nlc3Npb24ub3JpZ2luYWxQcm9tcHR9XCJcXG5gO1xuICAgIGNvbnRlbnQgKz0gYPCfjq8gQ29tcGxleGl0eTogJHtzZXNzaW9uLmNvbXBsZXhpdHl9IHwgRG9tYWluOiAke3Nlc3Npb24uZG9tYWlufVxcblxcbmA7XG4gICAgY29udGVudCArPSBcIkFwcGx5aW5nOlxcblwiO1xuXG4gICAgZm9yIChjb25zdCBzdGVwIG9mIGFwcHJvdmVkU3RlcHMpIHtcbiAgICAgICAgY29uc3QgaWNvbiA9IHN0ZXAuc3RhdHVzID09PSBcIm1vZGlmaWVkXCIgPyBcIvCfk51cIiA6IFwi4pyFXCI7XG4gICAgICAgIGNvbnRlbnQgKz0gYCR7aWNvbn0gJHtzdGVwLm5hbWV9XFxuYDtcbiAgICB9XG5cbiAgICBjb250ZW50ICs9IFwiXFxuRXhwZWN0ZWQgaW1wcm92ZW1lbnQ6IH42MC04MCUgcXVhbGl0eSBib29zdFwiO1xuXG4gICAgY29uc3QgZGlzcGxheSA9IGZvcm1hdEJveChcIlByb21wdCBPcHRpbWl6YXRpb25cIiwgY29udGVudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwbGF5LFxuICAgICAgICBhY3Rpb25zOiBbeyB0eXBlOiBcImFwcHJvdmVfYWxsXCIgfSwgeyB0eXBlOiBcInNraXBfb3B0aW1pemF0aW9uXCIgfV0sXG4gICAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdmVyYm9zZSBtb2RlIChzdGVwLWJ5LXN0ZXApXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRWZXJib3NlKFxuICAgIHNlc3Npb246IE9wdGltaXphdGlvblNlc3Npb24sXG4gICAgY3VycmVudFN0ZXAgPSAwLFxuKTogRm9ybWF0dGVkT3V0cHV0IHtcbiAgICAvLyBJZiBhbGwgc3RlcHMgYXBwcm92ZWQsIHNob3cgZmluYWwgcmV2aWV3XG4gICAgaWYgKGN1cnJlbnRTdGVwID49IHNlc3Npb24uc3RlcHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRGaW5hbFJldmlldyhzZXNzaW9uLCBcInZlcmJvc2VcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RlcCA9IHNlc3Npb24uc3RlcHNbY3VycmVudFN0ZXBdO1xuXG4gICAgbGV0IGNvbnRlbnQgPSBg8J+TnSBPcmlnaW5hbDogXCIke3Nlc3Npb24ub3JpZ2luYWxQcm9tcHR9XCJcXG5cXG5gO1xuICAgIGNvbnRlbnQgKz0gYPCfjq8gQ29tcGxleGl0eTogJHtzZXNzaW9uLmNvbXBsZXhpdHl9IChgO1xuICAgIGNvbnN0IGNvbXBsZXhpdHlMYWJlbHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgIHNpbXBsZTogXCJTaW1wbGUgLSBncmVldGluZyBvciBiYXNpYyByZXF1ZXN0XCIsXG4gICAgICAgIG1lZGl1bTogXCJNZWRpdW0gLSByZXF1aXJlcyBzb21lIGFuYWx5c2lzXCIsXG4gICAgICAgIGNvbXBsZXg6IFwiQ29tcGxleCAtIHJlcXVpcmVzIGRlZXAgYW5hbHlzaXNcIixcbiAgICB9O1xuICAgIGNvbnRlbnQgKz0gY29tcGxleGl0eUxhYmVsc1tzZXNzaW9uLmNvbXBsZXhpdHldIHx8IHNlc3Npb24uY29tcGxleGl0eTtcbiAgICBjb250ZW50ICs9IFwiKVxcblwiO1xuICAgIGNvbnRlbnQgKz0gYPCfj7fvuI8gIERvbWFpbjogJHtzZXNzaW9uLmRvbWFpbn1cXG5gO1xuXG4gICAgaWYgKHNlc3Npb24uZG9tYWluICE9PSBcImdlbmVyYWxcIikge1xuICAgICAgICBjb25zdCBkb21haW5MYWJlbHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICBzZWN1cml0eTogXCJTZWN1cml0eSAmIEF1dGhlbnRpY2F0aW9uXCIsXG4gICAgICAgICAgICBmcm9udGVuZDogXCJGcm9udGVuZCBEZXZlbG9wbWVudFwiLFxuICAgICAgICAgICAgYmFja2VuZDogXCJCYWNrZW5kIERldmVsb3BtZW50XCIsXG4gICAgICAgICAgICBkYXRhYmFzZTogXCJEYXRhYmFzZSAmIERhdGFcIixcbiAgICAgICAgICAgIGRldm9wczogXCJEZXZPcHMgJiBJbmZyYXN0cnVjdHVyZVwiLFxuICAgICAgICAgICAgYXJjaGl0ZWN0dXJlOiBcIlN5c3RlbSBBcmNoaXRlY3R1cmVcIixcbiAgICAgICAgICAgIHRlc3Rpbmc6IFwiVGVzdGluZyAmIFFBXCIsXG4gICAgICAgICAgICBnZW5lcmFsOiBcIkdlbmVyYWwgU29mdHdhcmUgRW5naW5lZXJpbmdcIixcbiAgICAgICAgfTtcbiAgICAgICAgY29udGVudCArPSBgICAke2RvbWFpbkxhYmVsc1tzZXNzaW9uLmRvbWFpbl0gfHwgc2Vzc2lvbi5kb21haW59XFxuYDtcbiAgICB9XG5cbiAgICAvLyBTaG93IG1pc3NpbmcgY29udGV4dCBpZiBhbmFseXNpcyBzdGVwXG4gICAgaWYgKHN0ZXAudGVjaG5pcXVlID09PSBcImFuYWx5c2lzXCIpIHtcbiAgICAgICAgY29uc3QgbWlzc2luZyA9XG4gICAgICAgICAgICBzZXNzaW9uLm9yaWdpbmFsUHJvbXB0Lmxlbmd0aCA8IDEwID8gW1wibW9yZSBkZXRhaWxzIG5lZWRlZFwiXSA6IFtdO1xuICAgICAgICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IGDimqDvuI8gIE1pc3Npbmc6ICR7bWlzc2luZy5qb2luKFwiLCBcIil9XFxuYDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXkgPSBmb3JtYXRCb3goXG4gICAgICAgIGBQcm9tcHQgT3B0aW1pemF0aW9uIChTdGVwICR7Y3VycmVudFN0ZXAgKyAxfS8ke3Nlc3Npb24uc3RlcHMubGVuZ3RofSlgLFxuICAgICAgICBjb250ZW50LFxuICAgICk7XG5cbiAgICBjb25zdCBhY3Rpb25zOiBBY3Rpb25bXSA9IFtdO1xuICAgIGlmIChzdGVwLnNraXBwYWJsZSkge1xuICAgICAgICBhY3Rpb25zLnB1c2goeyB0eXBlOiBcInJlamVjdFwiLCBzdGVwSWQ6IHN0ZXAuaWQgfSk7XG4gICAgfVxuICAgIGFjdGlvbnMucHVzaCh7IHR5cGU6IFwiYXBwcm92ZVwiLCBzdGVwSWQ6IHN0ZXAuaWQgfSk7XG4gICAgYWN0aW9ucy5wdXNoKHsgdHlwZTogXCJtb2RpZnlcIiwgc3RlcElkOiBzdGVwLmlkIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGlzcGxheSxcbiAgICAgICAgYWN0aW9ucyxcbiAgICB9O1xufVxuXG4vKipcbiAqIEZvcm1hdCBmaW5hbCByZXZpZXcgKHNob3dzIG9wdGltaXplZCBwcm9tcHQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGaW5hbFJldmlldyhcbiAgICBzZXNzaW9uOiBPcHRpbWl6YXRpb25TZXNzaW9uLFxuICAgIHZlcmJvc2l0eTogVmVyYm9zaXR5LFxuKTogRm9ybWF0dGVkT3V0cHV0IHtcbiAgICBjb25zdCBhcHByb3ZlZFN0ZXBzID0gc2Vzc2lvbi5zdGVwcy5maWx0ZXIoXG4gICAgICAgIChzKSA9PiBzLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiIHx8IHMuc3RhdHVzID09PSBcIm1vZGlmaWVkXCIsXG4gICAgKTtcblxuICAgIGxldCBjb250ZW50ID0gXCJcIjtcblxuICAgIC8vIFNob3cgdGVjaG5pcXVlIHN1bW1hcnkgZm9yIG5vcm1hbC92ZXJib3NlXG4gICAgaWYgKHZlcmJvc2l0eSAhPT0gXCJxdWlldFwiKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJUZWNobmlxdWVzIGFwcGxpZWQ6IFwiO1xuICAgICAgICBjb25zdCB0ZWNobmlxdWVOYW1lcyA9IGFwcHJvdmVkU3RlcHMubWFwKChzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcy5uYW1lO1xuICAgICAgICAgICAgLy8gRXh0cmFjdCBmaXJzdCB3b3JkIGZvciBzaG9ydCB0YWdzXG4gICAgICAgICAgICByZXR1cm4gYFske25hbWUuc3BsaXQoXCIgXCIpWzBdfV1gO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGVudCArPSBgJHt0ZWNobmlxdWVOYW1lcy5qb2luKFwiIFwiKX1cXG5cXG5gO1xuICAgIH1cblxuICAgIC8vIFNob3cgb3B0aW1pemVkIHByb21wdCBpbiBjb2RlIGJsb2NrXG4gICAgY29udGVudCArPSBcImBgYFxcblwiO1xuICAgIGNvbnRlbnQgKz0gc2Vzc2lvbi5maW5hbFByb21wdDtcbiAgICBjb250ZW50ICs9IFwiXFxuYGBgXCI7XG5cbiAgICBpZiAodmVyYm9zaXR5ICE9PSBcInF1aWV0XCIpIHtcbiAgICAgICAgY29uc3Qgc3RlcENvdW50ID0gYXBwcm92ZWRTdGVwcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSBzZXNzaW9uLnN0ZXBzLmxlbmd0aDtcblxuICAgICAgICBpZiAoc3RlcENvdW50ID4gMCkge1xuICAgICAgICAgICAgY29udGVudCArPSBcIlxcblxcblwiO1xuICAgICAgICAgICAgY29udGVudCArPSBgRXhwZWN0ZWQgaW1wcm92ZW1lbnQ6IH4ke3N0ZXBDb3VudCAqIDE1ICsgMzB9LSR7XG4gICAgICAgICAgICAgICAgc3RlcENvdW50ICogMjAgKyA1MFxuICAgICAgICAgICAgfSUgcXVhbGl0eSBib29zdGA7XG4gICAgICAgICAgICBjb250ZW50ICs9IGBcXG5UZWNobmlxdWVzIGFwcGxpZWQ6ICR7c3RlcENvdW50fS8ke3RvdGFsU3RlcHN9YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXkgPSBmb3JtYXRCb3goXCLinKggT3B0aW1pemVkIFByb21wdCBSZWFkeVwiLCBjb250ZW50KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRpc3BsYXksXG4gICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdHlwZTogXCJleGVjdXRlXCIgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJlZGl0X2ZpbmFsXCIgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJjYW5jZWxcIiB9LFxuICAgICAgICBdLFxuICAgIH07XG59XG5cbi8qKlxuICogTWFpbiBmb3JtYXR0ZXIgLSBkaXNwYXRjaGVzIHRvIGFwcHJvcHJpYXRlIGZvcm1hdHRlciBiYXNlZCBvbiB2ZXJib3NpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE91dHB1dChcbiAgICBzZXNzaW9uOiBPcHRpbWl6YXRpb25TZXNzaW9uLFxuICAgIHZlcmJvc2l0eTogVmVyYm9zaXR5LFxuICAgIGN1cnJlbnRTdGVwID0gMCxcbik6IEZvcm1hdHRlZE91dHB1dCB7XG4gICAgc3dpdGNoICh2ZXJib3NpdHkpIHtcbiAgICAgICAgY2FzZSBcInF1aWV0XCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0UXVpZXQoc2Vzc2lvbik7XG4gICAgICAgIGNhc2UgXCJub3JtYWxcIjpcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXROb3JtYWwoc2Vzc2lvbik7XG4gICAgICAgIGNhc2UgXCJ2ZXJib3NlXCI6XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VmVyYm9zZShzZXNzaW9uLCBjdXJyZW50U3RlcCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1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RztBQUFBO0FBQUE7QUFBQSxFQUN6QztBQUFBLEVBR0EsV0FBVztBQUFBLEVBQ1gsV0FBVyxRQUFRO0FBQUEsRUFDbkIsV0FBVztBQUFBLEVBRVgsSUFBSSxjQUFjLFNBQVM7QUFBQSxJQUN2QixNQUFNLFlBQVksY0FBYztBQUFBLElBQ2hDLE1BQU0sYUFBYSxRQUFRLE1BQU07QUFBQSxJQUVqQyxJQUFJLFlBQVksR0FBRztBQUFBLE1BQ2YsV0FBVztBQUFBO0FBQUE7QUFBQSxNQUNYLFdBQVcsMEJBQTBCLFlBQVksS0FBSyxNQUNsRCxZQUFZLEtBQUs7QUFBQSxNQUVyQixXQUFXO0FBQUEsc0JBQXlCLGFBQWE7QUFBQSxJQUNyRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sVUFBVSxVQUFVLDRCQUEyQixPQUFPO0FBQUEsRUFFNUQsT0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBLFNBQVM7QUFBQSxNQUNMLEVBQUUsTUFBTSxVQUFVO0FBQUEsTUFDbEIsRUFBRSxNQUFNLGFBQWE7QUFBQSxNQUNyQixFQUFFLE1BQU0sU0FBUztBQUFBLElBQ3JCO0FBQUEsRUFDSjtBQUFBO0FBTUcsU0FBUyxZQUFZLENBQ3hCLFNBQ0EsV0FDQSxjQUFjLEdBQ0M7QUFBQSxFQUNmLFFBQVE7QUFBQSxTQUNDO0FBQUEsTUFDRCxPQUFPLFlBQVksT0FBTztBQUFBLFNBQ3pCO0FBQUEsTUFDRCxPQUFPLGFBQWEsT0FBTztBQUFBLFNBQzFCO0FBQUEsTUFDRCxPQUFPLGNBQWMsU0FBUyxXQUFXO0FBQUE7QUFBQSxNQUV6QyxPQUFPLGFBQWEsT0FBTztBQUFBO0FBQUE7IiwKICAiZGVidWdJZCI6ICIyQTI0REMzODkzQjgzQTZGNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
